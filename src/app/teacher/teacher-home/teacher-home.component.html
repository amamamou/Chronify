<div class="teacher-home">
    <!-- Navbar with Logo and Links -->
    <nav class="navbar">
      <div class="navbar-left">
        <img src="assets/logoTM.png" alt="Logo" class="logo">
      </div>
      <div class="navbar-right">
        <div class="welcome-section">
          <div class="welcome-content">
            <p>Welcome, <strong>{{ userDetails.username }}</strong></p>
            <div class="profile-pic">
              <img src="assets/student1.png" alt="Profile Picture" class="profile-img" (click)="logout()">
            </div>
                      </div>
        </div>
      </div>
    </nav>
  
    <!-- Teacher Dashboard Section -->
    <section id="dashboard" class="teacher-dashboard">
        <h2>üéì Teacher Dashboard</h2>
        <p class="section-description">
          Manage your classes, assignments, and communications seamlessly.
        </p>
        <div class="dashboard-cards-container">
          <div class="dashboard-card" *ngFor="let item of dashboardItems" 
               (click)="item.title === 'Manage Profile' ? toggleProfileForm() : 
                        (item.title === 'Profile Details' ? toggleProfile() : 
                        (item.title === 'Messages' ? toggleMessages() : 
                        (item.title === 'My Schedule' ? toggleSchedule() : 
                        (item.title === 'Support Center' ? toggleSupport() :null))))">
            <div class="card-icon">
              <img [src]="item.icon" alt="{{ item.title }} Icon">
            </div>
            <div class="card-content">
              <h3>{{ item.title }}</h3>
              <p>{{ item.description }}</p>
            </div>
          </div>
        </div>      
    </section>
    <div *ngIf="isProfileVisible" class="details-overlay">
        <div class="details-form-container">
          <button class="close-button" (click)="toggleProfile()">‚ùå</button>
          <div class="details-header">
            <img
              *ngIf="teacherProfile.photoUrl"
              [src]="teacherProfile.photoUrl"
              alt="{{ teacherProfile.name }}"
              style="border-radius: 50%; width: 80px; height: 80px;"
            />
            <h2 class="details-title">{{ userDetails.username }}</h2>
            <p class="details-subtitle">Hello</p>
          </div>
          <div class="details-content">
          
            <div class="details-section">
              <h3>CIN</h3>
              <p>{{ userDetails.cin }}</p>
            </div>
            <div class="details-section">
              <h3>Role</h3>
              <p>{{ userDetails.role }}</p>
            </div>
           <!-- <div class="details-section">
              <h3>Classes</h3>
              <p>{{ teacherProfile.classes.join(', ') }}</p>
            </div>
            
            <div class="details-section">
              <h3>Subjects</h3>
              <p>{{ teacherProfile.subjects.join(', ') }}</p>
            </div>
          -->
            <div class="details-section">
              <h3>Contact</h3>
              <p>Email: {{ userDetails.email }}</p>
              <p *ngIf="teacherProfile.phone">Phone: {{ teacherProfile.phone }}</p>
            </div>
          </div>
        </div>
      </div>
      
    <!-- Full-page Overlay Form for Manage Profile -->
    <div *ngIf="isProfileFormVisible" class="profile-overlay">
        <div class="profile-form-container">
          <h3 class="profile-title">Manage Profile</h3>
          <p class="profile-description">Update your details below.</p>
          <form class="profile-form">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" placeholder="Enter your username" required class="input-field">
    
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" placeholder="Enter your email" required class="input-field">
    
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" placeholder="Enter your password" required class="input-field">
    
            <div class="button-container">
              <button type="submit" class="submit-button">Save Changes</button>
              <button type="button" class="cancel-button" (click)="toggleProfileForm()">Cancel</button>
            </div>
          </form>
        </div>
    </div>
  
    <!-- Class Schedule Section -->
    <div *ngIf="isScheduleVisible" class="overlay">
      <section id="schedule" class="schedule-container">
        <h2>üìÖ Class Schedule</h2>
        <p class="section-description">Your teaching schedule with subjects and classroom assignments.</p>
        <button class="close-button" (click)="toggleSchedule()">‚ùå</button>
    
        <!-- Print Button -->
        <button class="print-button" (click)="printSchedule()">Print</button>
    
        <!-- Filter Section -->
        <div class="filters">
          <label for="dayFilter">Day:</label>
          <select id="dayFilter" [(ngModel)]="selectedDay">
            <option value="">All</option>
            <option value="Lundi">Lundi</option>
            <option value="Mardi">Mardi</option>
            <option value="Mercredi">Mercredi</option>
            <option value="Jeudi">Jeudi</option>
            <option value="Vendredi">Vendredi</option>
            <option value="Samedi">Samedi</option>
          </select>
    
          <label for="teacherFilter">Teacher:</label>
          <input id="teacherFilter" [(ngModel)]="selectedTeacher" placeholder="Teacher Name" />
    
          <label for="classFilter">Class:</label>
          <input id="classFilter" [(ngModel)]="selectedClass" placeholder="Class Name" />
        </div>
    
        <!-- Table Section -->
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Day</th>
              <th>Start Time</th>
              <th>End Time</th>
              <th>Duration</th>
              <th>Teacher</th>
              <th>Subject</th>
              <th>Classroom</th>
              <th>Class</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let schedule of filteredSchedules">
              <td>{{ schedule.id }}</td>
              <td>{{ schedule.day }}</td>
              <td>{{ schedule.startTime }}</td>
              <td>{{ schedule.endTime }}</td>
              <td>{{ schedule.duree }}</td>
              <td>{{ schedule.teacher?.name }}</td>
              <td>{{ schedule.subject?.name }}</td>
              <td>{{ schedule.classroom?.name }}</td>
              <td>{{ schedule.class?.name }}</td>
            </tr>
          </tbody>
        </table>
      </section>
 
  
    <!-- Messages Section -->
    <div *ngIf="isMessagesVisible" class="overlay">
        <div class="messages-container">
          <button class="close-button" (click)="toggleMessages()">‚ùå</button>
          <h2>üì¨ Messages</h2>
          <ul class="messages-list">
            <li *ngFor="let message of messages" class="message-item">
              <div class="message-header">
                <strong class="sender">{{ message.sender }}</strong>
                <span class="timestamp">date</span>
              </div>
              <div class="message-body">
                <p class="subject"><strong>Subject:</strong> {{ message.subject }}</p>
                <p class="content">{{ message.content }}</p>
              </div>
            </li>
          </ul>
        </div>
    </div>
  <!-- Support Section -->
<div *ngIf="isSupportVisible" class="overlay">
  <div class="support-container">
    <h3 class="support-title">Contact Support Center</h3>
    <form class="support-form" (ngSubmit)="submitReclamation()">
      <label for="name">Full Name:</label>
      <input
        type="text"
        id="name"
        name="name"
        placeholder="Enter your full name"
        required
        class="input-field"
        [(ngModel)]="reclamationData.name"
        #name="ngModel"
      />
      <div *ngIf="name.invalid && name.touched" class="error-message">Name is required.</div>

      <label for="email">Email:</label>
      <input
        type="email"
        id="email"
        name="email"
        [readonly]="true"
        [(ngModel)]="reclamationData.email"
        class="input-field"
      />

      <label for="message">Message:</label>
      <textarea
        id="message"
        name="message"
        placeholder="Describe your issue"
        required
        class="textarea-field"
        [(ngModel)]="reclamationData.message"
        #message="ngModel"
      ></textarea>
      <div *ngIf="message.invalid && message.touched" class="error-message">Message is required.</div>

      <div class="button-container">
        <button type="submit" class="submit-button" [disabled]="!name.valid || !message.valid">
          Submit
        </button>
        <button type="button" class="cancel-button" (click)="toggleSupport()">Cancel</button>
      </div>
    </form>
  </div>
</div>


  
    <!-- Conferences Section -->
    <section id="conferences" class="conferences">
        <h2>üéä Upcoming Conferences</h2>
        <p class="section-description">
          Stay informed about our upcoming conferences designed to enhance your professional development and foster networking opportunities.
        </p>
        <div class="cards-container" id="events-container" (scroll)="updateActiveDot('events-container', 'activeEventIndex')">
            <div *ngFor="let event of events; let i = index" class="card">
              <img [src]="event.image" alt="Event Image" class="card-image">
            </div>
          </div>
          <div class="dots-container">
            <span *ngFor="let dot of dots; let i = index" class="dot" [class.active]="activeEventIndex === i" (click)="scrollToEventGroup(i)"></span>
          </div>
        </section>
    
      <!-- Seminars Section -->
      <section id="seminars" class="seminars">
        <h2>üìö Available Seminars</h2>
        <p class="section-description">
          Explore our wide range of professionally curated seminars aimed at boosting your skills and empowering your career growth.
        </p>
        <div class="cards-container" id="courses-container" (scroll)="updateActiveDot('courses-container', 'activeCourseIndex')">
            <div *ngFor="let course of courses; let i = index" class="card">
              <img [src]="course.image" alt="Course Image" class="card-image">
              <div class="card-content">
                <h3>{{ course.title }}</h3>
              </div>
            </div>
          </div>
          <div class="dots-container">
            <span *ngFor="let dot of dots; let i = index" class="dot" [class.active]="activeCourseIndex === i" (click)="scrollToCourseGroup(i)"></span>
          </div>
        </section>
    
      <!-- Footer -->
      <footer class="footer">
        <p>¬© 2025 TimeMaster. All Rights Reserved.</p>
      </footer>
    </div>
