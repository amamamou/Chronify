<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeMaster - Schedule Management</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.icons8.com/fonts/line-awesome/1.0.0/line-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/healthicons/1.0.0/healthicons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <div class="menu">
    <div class="logo">
        <img src="assets/logoTM.png" alt="TimeMaster Logo" />
        <br>
        <span class="site-title">TimeMaster</span>
      </div>
    <div class="menu-items">
        <div class="menu-item">
            <a [routerLink]="['/admin/home']">
                <img src="assets/icons/Home.png" alt="Home Icon" />
                <p>Home</p>
            </a>
        </div>
        <div class="menu-item">
            <a [routerLink]="['/admin/users']">
                <img src="assets/icons/People.png" alt="Students Icon" />
                <p>Users</p>
            </a>
        </div>
        <div class="menu-item">
            <a [routerLink]="['/admin/students']">
                <img src="assets/icons/Graduate.png" alt="Students Icon" />
                <p>Students</p>
            </a>
        </div>

        <div class="menu-item">
            <a [routerLink]="['/admin/teachers']">
                <img src="assets/icons/Training.png" alt="Teachers Icon" />
                <p>Teachers</p>
            </a>
        </div>
        <div class="menu-item">
            <a [routerLink]="['/admin/establishments']">
                <img src="assets/icons/Uni.png" alt="Subjects Icon" />
              <p>Establishments</p>
            </a>
        </div>
        <div class="menu-item">
            <a [routerLink]="['/admin/classrooms']">
                <img src="assets/icons/Classroom.png" alt="Classes Icon" />
                <p>Classrooms</p>
            </a>
        </div>
        <div class="menu-item">
            <a [routerLink]="['/admin/classes']">
                <img src="assets/icons/Students.png" alt="Classes Icon" />
                <p>Classes</p>
            </a>
        </div>

        <div class="menu-item">
            <a [routerLink]="['/admin/courses']">
                <img src="assets/icons/Subject.png" alt="Subjects Icon" />
                <p>Courses</p>
            </a>
        </div>
      

        <div class="menu-item">
            <a [routerLink]="['/admin/schedule']">
                <img src="assets/icons/Schedule.png" alt="Subjects Icon" />
                <p>Timetables</p>
            </a>
        </div>
        <div class="menu-item">
            <a [routerLink]="['/admin/reclamations']">
                <img src="assets/icons/Complaint.png" alt="Subjects Icon" />
                <p>Complaints</p>
            </a>
        </div>
        <div class="menu-item logout">
            <a (click)="logout()">
                <i class="fa-solid fa-sign-out-alt" style="color: #E74040; font-size: 18px;"></i>
                <p class="logout-text" style="color: #E74040;">Sign Out</p>
            </a>
        </div>
        
    </div>
</div>



<div class="schedule-container">
  <div class="top-right-section">
    <!-- Search Bar -->
    <div class="search-bar">
      <input type="text" placeholder="Search" class="search-input" [(ngModel)]="searchQuery" (keyup)="onSearch()" />
    </div>

    <div class="profile-section">
      <div class="profile-pic">
        <img src="assets/teacher1.jpg" alt="Admin Profile" class="profile-img" />
      </div>
      <div class="profile-info">
        <p class="admin-name">{{ userDetails.username }}</p>
        <p class="admin-email">admin</p>
      </div>
    </div>

    <img src="assets/adminhome/notif.png" alt="Notification" class="notif-image" />
  </div>

  <!-- Header with Filters Applied and Date -->
  <div class="schedule-header">
    <h2>Schedule Timetable</h2>
    <p>Academic Year: 2025 | Printed on: {{ currentDate | date: 'MMMM dd, yyyy' }}</p>
    <p>
      <strong>Filters Applied:</strong>
      <span *ngIf="selectedTeacher">Teacher: {{ selectedTeacher }}</span>
      <span *ngIf="selectedDay"> | Day: {{ selectedDay }}</span>
      <span *ngIf="selectedClass"> | Class: {{ selectedClass }}</span>
    </p>
  </div>

  <div class="schedule-input-section">
    <label for="teacherName">Teacher Name:</label>
    <input id="teacherName" [(ngModel)]="newSchedule.teacherName" placeholder="Enter teacher's name" />

    <label for="subjectName">Subject Name:</label>
    <input id="subjectName" [(ngModel)]="newSchedule.subjectName" placeholder="Enter subject name" />

    <label for="className">Class Name:</label>
    <input id="className" [(ngModel)]="newSchedule.className" placeholder="Enter class name" />

    <label for="duration">Duration:</label>
    <input id="duration" [(ngModel)]="newSchedule.duration" placeholder="Enter duration" />

    <button (click)="generateSchedule()">Generate Schedule</button>
</div>


  <!-- Filter Section (Hidden in Print) -->
  <div class="filters" *ngIf="!isPrinting">
    <label for="dayFilter">Day:</label>
    <select id="dayFilter" [(ngModel)]="selectedDay">
        <option value="">All</option>
        <option value="Lundi">Lundi</option>
        <option value="Mardi">Mardi</option>
        <option value="Mercredi">Mercredi</option>
        <option value="Jeudi">Jeudi</option>
        <option value="Vendredi">Vendredi</option>
        <option value="Samedi">Samedi</option>
      </select>
      

    <label for="teacherFilter">Teacher:</label>
    <input id="teacherFilter" [(ngModel)]="selectedTeacher" placeholder="Teacher Name" />

    <label for="classFilter">Class:</label>
    <input id="classFilter" [(ngModel)]="selectedClass" placeholder="Class Name" />
  </div>

  <!-- Print Button -->
  <div class="print-btn-container">
    <button class="print-btn" (click)="printSchedule()">Print</button>
  </div>

  <!-- Table Section -->
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Day</th>
        <th>Start Time</th>
        <th>End Time</th>
        <th>Duration</th>
        <th>Teacher</th>
        <th>Subject</th>
        <th>Classroom</th>
        <th>Class</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let schedule of filteredSchedules">
        <td>{{ schedule.id }}</td>
        <td>{{ schedule.day }}</td>
        <td>{{ schedule.startTime }}</td>
        <td>{{ schedule.endTime }}</td>
        <td>{{ schedule.duree }}</td>
        <td>{{ schedule.teacher?.name }}</td>
        <td>{{ schedule.subject?.name }}</td>
        <td>{{ schedule.classroom?.name }}</td>
        <td>{{ schedule.class?.name }}</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Footer for Print Only -->
<div class="schedule-footer">
  <p>&copy; 2025 Your Organization. All rights reserved.</p>
</div>
